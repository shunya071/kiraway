{% style %}
.swiper {
  padding: 3rem 0;
  position: relative;
}
.swiper-slide {
  width: 100% !important;
  padding: 1rem;
}
.swiper-slide img {
  width: 100%;
  height: auto;
  border-radius: 15px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
.swiper-pagination-bullet-active {
  background-color: #000;
}
.swiper-button-next,
.swiper-button-prev {
  color: #000;
  font-size: 1.5rem;
}
{% endstyle %}

<section class="kira_block">
  <div class="swiper" aria-label="{{ section.settings.slider_label }}">
    <div class="swiper-wrapper">
      {%- for i in (1..5) -%}
        {%- assign slide_image = section.settings["slide_" | append: i | append: "_image"] -%}
        {%- assign slide_link = section.settings["slider_link_" | append: i] -%}
        {%- if slide_image != blank -%}
          <div class="swiper-slide" aria-label="Slide {{ i }}">
            <a href="{{ slide_link }}">
              <img src="{{ slide_image | img_url: 'master' }}" alt="{{ section.settings.slider_label }} Slide {{ i }}" loading="lazy">
            </a>
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>
    <!-- Pagination -->
    <div class="swiper-pagination"></div>
    <!-- Navigation Buttons -->
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
  </div>
</section>

{% javascript %}
document.addEventListener('DOMContentLoaded', function () {
  const swiper = new Swiper('.swiper', {
    autoplay: {
      delay: 4000,
      disableOnInteraction: false,
    },
    loop: true,
    slidesPerView: 1,
    spaceBetween: 20,
    centeredSlides: true,
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    // breakpoints: {
    //   768: {
    //     slidesPerView: 1,
    //     spaceBetween: 30,
    //   },
    //   1024: {
    //     slidesPerView: 1,
    //     spaceBetween: 40,
    //   },
    // },
  });
});
{% endjavascript %}

{% schema %}
{
  "name": "AdSense Slider",
  "settings": [
    {
      "type": "text",
      "id": "slider_label",
      "label": "スライダーのラベル",
      "default": "広告スライダー"
    },
    {
      "type": "image_picker",
      "id": "slide_1_image",
      "label": "スライド 1 の画像"
    },
    {
      "type": "url",
      "id": "slider_link_1",
      "label": "スライダーリンク1"
    },
    {
      "type": "image_picker",
      "id": "slide_2_image",
      "label": "スライド 2 の画像"
    },
    {
      "type": "url",
      "id": "slider_link_2",
      "label": "スライダーリンク2"
    },
    {
      "type": "image_picker",
      "id": "slide_3_image",
      "label": "スライド 3 の画像"
    },
    {
      "type": "url",
      "id": "slider_link_3",
      "label": "スライダーリンク3"
    },
    {
      "type": "image_picker",
      "id": "slide_4_image",
      "label": "スライド 4 の画像"
    },
    {
      "type": "url",
      "id": "slider_link_4",
      "label": "スライダーリンク4"
    },
    {
      "type": "image_picker",
      "id": "slide_5_image",
      "label": "スライド 5 の画像"
    },
    {
      "type": "url",
      "id": "slider_link_5",
      "label": "スライダーリンク5"
    }
  ],
  "presets": [
    {
      "name": "広告スライダー"
    }
  ]
}
{% endschema %}